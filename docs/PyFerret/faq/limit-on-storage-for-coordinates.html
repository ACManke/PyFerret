 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML+RDFa 1.1//EN">
<html lang="en" dir="ltr" version="HTML+RDFa 1.1"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:dc="http://purl.org/dc/terms/"
xmlns:foaf="http://xmlns.com/foaf/0.1/"
xmlns:og="http://ogp.me/ns#"
xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
xmlns:sioc="http://rdfs.org/sioc/ns#"
xmlns:sioct="http://rdfs.org/sioc/types#"
xmlns:skos="http://www.w3.org/2004/02/skos/core#"
xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
xmlns:schema="http://schema.org/">
<head profile="http://www.w3.org/1999/xhtml/vocab">
<title>Limit on Storage for Coordinates - Ferret/PyFerret FAQs</title>

<link rel="stylesheet" href="../modules/system/system.base.css">
<link rel="stylesheet" href="../modules/system/system.menus.css">
<link rel="stylesheet" href="../modules/system/system.messages.css">
<link rel="stylesheet" href="../modules/system/system.theme.css">

<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.core.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.theme.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.menu.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.autocomplete.min.css">

<link rel="stylesheet" href="../sites/all/modules/calendar/css/calendar_multiday.css">
<link rel="stylesheet" href="../modules/field/theme/field.css">
<link rel="stylesheet" href="../sites/all/modules/scald/modules/fields/mee/css/editor-global.css">
<link rel="stylesheet" href="../modules/node/node.css">
<link rel="stylesheet" href="../sites/all/modules/scald_file/scald_file.css">
<link rel="stylesheet" href="../modules/search/search.css">
<link rel="stylesheet" href="../modules/user/user.css">
<link rel="stylesheet" href="../sites/all/modules/views/css/views.css">
<link rel="stylesheet" href="../sites/all/modules/ckeditor/css/ckeditor.css">

<link rel="stylesheet" href="../sites/all/modules/ctools/css/ctools.css">
<link rel="stylesheet" href="../sites/all/modules/custom_search/custom_search.css">
<link rel="stylesheet" href="../sites/all/modules/search_autocomplete/css/themes/minimal.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish-smallscreen.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish-vertical.css">

<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/ckeditor_custom.css">

<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-reset.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-mobile.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-alpha.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/formalize.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-text.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-branding.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-menu.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-forms.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-visuals.css">
<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/global.css">



<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default.css">
<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default-wide.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/grid/alpha_default/wide/alpha-default-wide-12.css">


</head>
<body class="html not-front not-logged-in page-node page-node- page-node-555 node-type-documentation-page context-documentation">
  <div id="body-bg-top"></div>
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div class="page clearfix" id="page">
      <header id="section-header" class="section section-header">
  <div id="zone-header-wrapper" class="zone-wrapper zone-header-wrapper clearfix">  
  <div id="zone-header" class="zone zone-header clearfix container-12">
    <div class="grid-7 region region-branding" id="region-branding">
  <div class="region-inner region-branding-inner">
        <div class="branding-data clearfix">
            <div class="logo-img">
        <a href="../index.html" rel="home" title=""><img src="../sites/all/themes/pacific_marine/images/ferret-banner.png" alt="" id="logo" /></a>
		</div>
                </div>
          </div>
</div><div class="grid-5 region region-header-first" id="region-header-first">
  <div class="region-inner region-header-first-inner">
    <div class="block block-block block-4 block-block-4 odd block-without-title" id="block-block-4">
  <div class="block-inner clearfix">

  </div>
</div>
  </div>
</div>  </div>
</div>  </div>
</div><div id="zone-menu-wrapper" class="zone-wrapper zone-menu-wrapper clearfix">  
  <div id="zone-menu" class="zone zone-menu clearfix container-12">
    <div class="grid-12 region region-menu" id="region-menu">
  <div class="region-inner region-menu-inner">
        <div class="block block-system block-menu block-main-menu block-system-main-menu odd block-without-title" id="block-system-main-menu">
  <div class="block-inner clearfix">
                
    <div class="content clearfix">
      <ul class="menu">
	  <li class="first expanded"><a href="../index.html">Home</a>
	  <ul class="menu">
	  </li>
<li class="leaf"><a href="../index.html">Ferret/PyFerret Home</a></li>
</ul></li>
<li class="leaf"><a href="../documentation/ferret-documentation.html">Documentation</a></li>
<li class="leaf"><a href="ferret-faqs.html">FAQ</a></li>
<li class="collapsed"><a href="../documentation/pyferret/downloads.html">Downloads</a></li>
<li class="collapsed"><a href="../documentation/pyferret-support.html">Support</a></li>
</ul>    </div>
  </div>
</div>  </div>
</div>
  </div>
</div></header> 


      <section id="section-content" class="section section-content">
  <div id="zone-preface-wrapper" class="zone-wrapper zone-preface-wrapper clearfix">  
  <div id="zone-preface" class="zone zone-preface clearfix equal-height-container container-12">
    <div class="grid-3 region region-preface-first equal-height-element" id="region-preface-first">
  <div class="region-inner region-preface-first-inner">
      </div>
</div><div class="grid-9 region region-preface-second equal-height-element" id="region-preface-second">
  <div class="region-inner region-preface-second-inner">
      </div>
</div>  </div>
</div><div id="zone-content-wrapper" class="zone-wrapper zone-content-wrapper clearfix no-sidebar">  
  <div id="zone-content" class="zone zone-content clearfix equal-height-container container-12">    
        
        <div class="grid-12 region region-content equal-height-element" id="region-content">
  <div class="region-inner region-content-inner">
    <a id="main-content"></a>
            <div class="element-invisible">   
    </div>                    <div class="block block-system block-main block-system-main odd block-without-title" id="block-system-main">
  <div class="block-inner clearfix">
                
    <div class="content clearfix">
      <article about="/Ferret/index.html" typeof="foaf:Document" class="node node-page node-published node-not-promoted node-not-sticky author-burger odd clearfix" id="node-page-771">

<h2 class="block-title"><a href="ferret-faqs.html" class="active-trail">FAQ</a></h2>
<a id="main-content"></a>
<div class="element-invisible">    <h1 class="title" id="page-title">Limit on Storage for Coordinates</h1>
</div>                    <div class="block block-system block-main block-system-main odd block-without-title" id="block-system-main">
<div class="block-inner clearfix">
 
<div class="content clearfix">
<article about="/Ferret/faq/limit-on-storage-for-coordinates" typeof="foaf:Document" class="node node-page node-published node-not-promoted node-not-sticky author-ansley odd clearfix" id="node-page-673">

<h1 id="page title"  class="node-title">Limit on Storage for Coordinates</h1>  <div class="content clearfix">
 
<div class="field field-name-body field-type-text-with-summary field-label-hidden">
<div class="field-items">
<div class="field-item even" property="content:encoded"><h2>Question:</h2>
<blockquote><p>How do I get around the Ferret error message:<br />
**TMAP ERR: limit on storage for coordinates has been reached: MAX= 750000 ?</p></blockquote>
<h2>Example:</h2>
<blockquote><p>&gt; Does FERRET have limitation on storage for coordinate? I have a netCDF<br />
&gt; file containing a time series with a large number of time steps. When I tried<br />
&gt; to use FERRET, use metero.cdf, I got " **TMAP ERR: limit on storage for<br />
&gt; coordinates has been reached MAX= 750000". Then I made a test by cutting<br />
&gt; the data down to 5000 time levels, FERRET is OK to work on this short time<br />
&gt; series.<br />
&gt;<br />
&gt; Can somebody tell me how to go around this problem?</p></blockquote>
<h2>Explanation:</h2>
<p>Previous to Ferret v7.3, there was a fixed set of internal storage dedicated to storing all of the data for the coordinate axes available to the current Ferret session. This includes data being read from netCDF or OPeNDAP datasets and from DEFINE AXIS definitions. In Ferret v7.3 and higher this limitation is lifted.  Storage for handling coordinate data is handled with dynamic allocation of memory.  As before, if the coordinates for an axis are determined to be regularly-spaced, they are not all stored; only the start, count and cell size are needed in that case.</p>
<h2>Solution:</h2>
<p>Upgrade to Ferret/ PyFerret v7.3 or higher.</p>
<p> </p>
<p>----------------------------------------------------</p>
<p><em><strong>Discussion, Previous to v7.3:</strong></em></p>
<p>Yes, Ferret did have a limit of 750000 coordinate points; and note that this includes storage both for the coordinate points and the edges of the grid cells. But generally this limit need not get in your way. It is only really a limit if you have 750K <b>unevenly spaced</b> coordinate points -- this is rarely the case. Your NetCDF file needs to TELL Ferret that the time points are regularly spaced. Ferret is attempting to read them so it can check the spacing. Having determined that the points were evenly spaced it would retain only the start,end, and delta values (freeing up the space), but it isn't getting that far.</p>
<p> </p>
<h2>Solutions:</h2>
<p>There are two solutions to this. If the axis is in fact regularly spaced, add information to the netCDF file to tell Ferret this. Or, if this is a time axis, you can just open the file with a qualifier which tells Ferret to treat the axis as a regularly-spaced axis.</p>
<p>1) From <b><a href="../documentation/users-guide/converting-to-netcdf/WRITING-A-CONVERSION-PROGRAM.html#_VPID_361" title="10.3 WRITING A CONVERSION PROGRAM">Chapter 10 </a></b>in the Ferret Users Guide:</p>
<blockquote><p>10.3.5.4 Evenly spaced coordinates (long axes), see "memory, NetCDF" in the Users Guide index.</p>
<p>If the coordinate axes are evenly spaced, the attribute "point spacing" should be used:</p>
<pre>
slat: point_spacing = "even" ;</pre><p>When used, this attribute will improve memory use efficiency in Ferret. This is especially important for very large axes--10,000 points or more.</p>
</blockquote>
<p>You can use the Ferret function NCO_ATTR to add this attribute to an axis of your file.If the axis also has bounds then you will also need to remove the bounds attribute from the axis. Or use NCO operators from the Unix command line. See the <b><a href="../documentation/users-guide/appendix-a-external-functions/NCO_ATTR.html" title="NCO_ATTR">NCO_ATTR function </a></b>in the Ferret documentation. Ferret Users Guide. The documentation includes references to the NCO operators.</p>
<p>To add</p>
<pre>
TEMP:point_spacing = "even" ;</pre><p>to your file dat.nc, just</p>
<pre>
yes? show grid var ! see what the axis is called
yes? cancel data/all
yes? let status = NCO_ATTR ("dat.nc", "TEMP", "point_spacing", "c", "o", "even")
yes? load status
yes? use dat.nc
yes? show grid var ! see the grid.
yes? show data/att ! Lists all the attributes for the variables.
</pre><p>If the axis has a "bounds" attribute then the axis may still be seen by Ferret as irregular. To delete the bounds attribute,</p>
<pre>
yes? cancel data/all
yes? let status = NCO_ATTR ("dat.nc", "TEMP", "bounds", "c", "d", " ")
yes? use dat.nc
</pre><p>This will leave the bounds coordinates listed in the file, but they will be ignored by Ferret when using the axis.</p>
<p>Note that (starting with Ferret v7.5) Ferret will do some checking on the spacing; when the point_spacing attribute is present it compares the size of the first delta-coordinate with (last-first)/npoints. If the coordinates are really not regularly spaced, then it'll issue a warning and go ahead and read all of the coordinates, treating the axis as an irregular axis.<br />
 </p>
<p>2) If it is a <b>time</b> axis that's missing a point_spacing = "even" attribute, (or if it is actually irregularly spaced), you can have Ferret treat the axis as being regularly spaced, by opening it with the /REGULART qualifier:</p>
<pre>
yes? USE/REGULART dat.nc
yes? show grid var
</pre><p>This also speeds up the initialization step for a file, if this time axis is the record axis for the file and the axis is long - a common situation.</p>
<hr /></div>
</div>
</div>

</div>

<div class="clearfix">
<nav class="links node-links clearfix"></nav>

</div>
</article>    </div>
</div>
</div>      </div>
</div>  </div>
</div></section>    
 
<footer id="section-footer" class="section section-footer">

  <div id="zone-footer-wrapper" class="zone-wrapper zone-footer-wrapper clearfix">  
  <div id="zone-footer" class="zone zone-footer clearfix container-12">
    <div class="grid-8 region region-footer-first" id="region-footer-first">
  <div class="region-inner region-footer-first-inner">
    <div class="block block-block block-1 block-block-1 odd block-without-title" id="block-block-1">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-block block-2 block-block-2 even block-without-title" id="block-block-2">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-menu block-menu-footer-first-menu block-menu-menu-footer-first-menu odd block-without-title" id="block-menu-menu-footer-first-menu">

  </div>
</div>  </div>
</div><div class="grid-4 region region-footer-second" id="region-footer-second">
  <div class="region-inner region-footer-second-inner">
    <div class="block block-menu block-menu-footer-second-menu block-menu-menu-footer-second-menu odd block-without-title" id="block-menu-menu-footer-second-menu">
  <div class="block-inner clearfix">
                
  </div>
</div>  </div>
</div>  </div>
</div></footer>  </div>  <div class="region region-page-bottom" id="region-page-bottom">
  <div class="region-inner region-page-bottom-inner">
      </div>
</div>  <div id="body-bg-bottom"></div>
</body>
</html>

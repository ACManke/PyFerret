 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML+RDFa 1.1//EN">
<html lang="en" dir="ltr" version="HTML+RDFa 1.1"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:dc="http://purl.org/dc/terms/"
xmlns:foaf="http://xmlns.com/foaf/0.1/"
xmlns:og="http://ogp.me/ns#"
xmlns:rdfs="https://www.w3.org/2000/01/rdf-schema#"
xmlns:sioc="http://rdfs.org/sioc/ns#"
xmlns:sioct="http://rdfs.org/sioc/types#"
xmlns:skos="https://www.w3.org/2004/02/skos/core#"
xmlns:xsd="https://www.w3.org/2001/XMLSchema#"
xmlns:schema="http://schema.org/">
<head profile="https://www.w3.org/1999/xhtml/vocab">
<title>PyFerret metadata-and-data dictionaries - Ferret/PyFerret Documentation</title>

<link rel="stylesheet" href="../../modules/system/system.base.css">
<link rel="stylesheet" href="../../modules/system/system.menus.css">
<link rel="stylesheet" href="../../modules/system/system.messages.css">
<link rel="stylesheet" href="../../modules/system/system.theme.css">

<link rel="stylesheet" href="../../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.core.min.css">
<link rel="stylesheet" href="../../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.theme.min.css">
<link rel="stylesheet" href="../../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.menu.min.css">
<link rel="stylesheet" href="../../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.autocomplete.min.css">

<link rel="stylesheet" href="../../sites/all/modules/calendar/css/calendar_multiday.css">
<link rel="stylesheet" href="../../modules/field/theme/field.css">
<link rel="stylesheet" href="../../sites/all/modules/scald/modules/fields/mee/css/editor-global.css">
<link rel="stylesheet" href="../../modules/node/node.css">
<link rel="stylesheet" href="../../sites/all/modules/scald_file/scald_file.css">
<link rel="stylesheet" href="../../modules/search/search.css">
<link rel="stylesheet" href="../../modules/user/user.css">
<link rel="stylesheet" href="../../sites/all/modules/views/css/views.css">
<link rel="stylesheet" href="../../sites/all/modules/ckeditor/css/ckeditor.css">

<link rel="stylesheet" href="../../sites/all/modules/ctools/css/ctools.css">
<link rel="stylesheet" href="../../sites/all/modules/custom_search/custom_search.css">
<link rel="stylesheet" href="../../sites/all/modules/search_autocomplete/css/themes/minimal.css">
<link rel="stylesheet" href="../../sites/all/libraries/superfish/css/superfish.css">
<link rel="stylesheet" href="../../sites/all/libraries/superfish/css/superfish-smallscreen.css">
<link rel="stylesheet" href="../../sites/all/libraries/superfish/css/superfish-vertical.css">

<link rel="stylesheet" href="../../sites/all/themes/pacific_marine/css/ckeditor_custom.css">

<link rel="stylesheet" href="../../sites/all/themes/omega/alpha/css/alpha-reset.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/alpha/css/alpha-mobile.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/alpha/css/alpha-alpha.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/omega/css/formalize.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/omega/css/omega-text.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/omega/css/omega-branding.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/omega/css/omega-menu.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/omega/css/omega-forms.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/omega/css/omega-visuals.css">
<link rel="stylesheet" href="../../sites/all/themes/pacific_marine/css/global.css">



<link rel="stylesheet" href="../../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default.css">
<link rel="stylesheet" href="../../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default-wide.css">
<link rel="stylesheet" href="../../sites/all/themes/omega/alpha/css/grid/alpha_default/wide/alpha-default-wide-12.css">


</head>
<body class="html not-front not-logged-in page-node page-node- page-node-555 node-type-documentation-page context-documentation">
  <div id="body-bg-top"></div>
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div class="page clearfix" id="page">
      <header id="section-header" class="section section-header">
  <div id="zone-header-wrapper" class="zone-wrapper zone-header-wrapper clearfix">  
  <div id="zone-header" class="zone zone-header clearfix container-12">
    <div class="grid-7 region region-branding" id="region-branding">
  <div class="region-inner region-branding-inner">
        <div class="branding-data clearfix">
            <div class="logo-img">
        <a href="../../" rel="home" title=""><img src="../../sites/all/themes/pacific_marine/images/ferret-banner.png" alt="" id="logo" /></a>
		</div>
                </div>
          </div>
</div><div class="grid-5 region region-header-first" id="region-header-first">
  <div class="region-inner region-header-first-inner">
    <div class="block block-block block-4 block-block-4 odd block-without-title" id="block-block-4">
  <div class="block-inner clearfix">

  </div>
</div>
  </div>
</div>  </div>
</div>  </div>
</div><div id="zone-menu-wrapper" class="zone-wrapper zone-menu-wrapper clearfix">  
  <div id="zone-menu" class="zone zone-menu clearfix container-12">
    <div class="grid-12 region region-menu" id="region-menu">
  <div class="region-inner region-menu-inner">
        <div class="block block-system block-menu block-main-menu block-system-main-menu odd block-without-title" id="block-system-main-menu">
  <div class="block-inner clearfix">
                
    <div class="content clearfix">
      <ul class="menu">
	  <li class="first expanded"><a href="../../">Home</a>
<li class="leaf"><a href="../ferret-documentation.html">Documentation</a></li>
<li class="leaf"><a href="../../faq/ferret-faqs.html">FAQ</a></li>
<li class="collapsed"><a href="downloads.html">Downloads</a></li>
<li class="collapsed"><a href="../pyferret-support.html">Support</a></li>
</ul>    </div>
  </div>
</div>  </div>
</div>
  </div>
</div></header> 
<section id="section-content" class="section section-content">
<div id="zone-preface-wrapper" class="zone-wrapper zone-preface-wrapper clearfix">  
<div id="zone-preface" class="zone zone-preface clearfix equal-height-container container-12">
<div class="grid-3 region region-preface-first equal-height-element" id="region-preface-first">
<div class="region-inner region-preface-first-inner">
</div>
</div><div class="grid-9 region region-preface-second equal-height-element" id="region-preface-second">
<div class="region-inner region-preface-second-inner">
</div>
</div>  </div>
</div><div id="zone-content-wrapper" class="zone-wrapper zone-content-wrapper clearfix sidebar">  
<div id="zone-content" class="zone zone-content clearfix equal-height-container container-12">    

        <aside class="grid-3 region region-sidebar-first equal-height-element" id="region-sidebar-first">
  <div class="region-inner region-sidebar-first-inner">
    <div class="block block-superfish block-1 block-superfish-1 odd block-without-title" id="block-superfish-1">
  <div class="block-inner clearfix">
                
    <div class="content clearfix"> <!-- start -->
      <ul  id="superfish-1" class="menu sf-menu sf-main-menu sf-vertical sf-style-none sf-total-items-8 sf-parent-items-4 sf-single-items-4"><li id="menu-1620-1" class="first odd sf-item-1 sf-depth-2 sf-no-children"><a href="../version-763-release-notes.html" class="sf-depth-2">Current Release Notes</a></li>
<li id="menu-1170-1" class="active-trail middle even sf-item-2 sf-depth-2 sf-total-children-17 sf-parent-children-15 sf-single-children-2 menuparent">
<a href="../users-guide/users-guide.html" class="sf-depth-2 menuparent">Ferret Users Guide</a>
</li>
<li id="menu-1336-1" class="middle odd sf-item-3 sf-depth-2 sf-no-children"><a href="../all-release-notes.html" class="sf-depth-2">Previous Release Notes</a></li>
<li id="menu-1339-1" class="middle even sf-item-4 sf-depth-2 sf-total-children-15 sf-parent-children-1 sf-single-children-14 menuparent"><a href="../ferret-tutorials.html" class="sf-depth-2 menuparent">Tutorials and Demos</a></li>

<li id="menu-1333-1" class="middle odd sf-item-5 sf-depth-2 sf-total-children-13 sf-parent-children-1 sf-single-children-12 menuparent"><a href="../pyferret.html" class="sf-depth-2 menuparent">PyFerret</a>
</li>

<li id="menu-1147-1" class="middle even sf-item-6 sf-depth-2 sf-total-children-3 sf-parent-children-0 sf-single-children-3 menuparent"><a href="../opendap/opendap-usage-in-ferret.html" class="sf-depth-2 menuparent">OPeNDAP</a></li>


<!-- <li id="menu-1592-1" class="middle odd sf-item-7 sf-depth-2 sf-no-children"><a href="../ferret-publications.html" class="sf-depth-2">Ferret Publications</a></li>
<li id="menu-1389-1" class="last even sf-item-8 sf-depth-2 sf-no-children"><a href="../acknowledging-ferret.html" class="sf-depth-2">Acknowledging Ferret</a></li> -->  
</ul>  <!-- end -->  </div>
  </div>
</div>  </div>
</aside><div class="grid-9 region region-content equal-height-element" id="region-content">
  <div class="region-inner region-content-inner">
<a id="main-content"></a>
<h1 class="title" id="page-title">PyFerret metadata-and-data dictionaries</h1>
<div class="block block-system block-main block-system-main odd block-without-title" id="block-system-main">
<div class="block-inner clearfix">
 
<div class="content clearfix">
<article about="/Ferret/documentation/pyferret/data-dictionaries" typeof="sioc:Item foaf:Document" class="node node-documentation-page node-promoted node-published node-not-sticky author-kobrien odd clearfix" id="node-documentation-page-385">


 
<div class="field field-name-field-page-description field-type-text field-label-hidden">
<div class="field-items">
<div class="field-item even" property="schema:description">Working with PyFerret&#039;s metadata-and-data dictionaries</div>
</div>
</div>

<div class="content clearfix">
 
<div class="field field-name-body field-type-text-with-summary field-label-hidden">
<div class="field-items">
<div class="field-item even" property="content:encoded"><p><a href="fortranefs.html">Previous</a> <a href="requirements.html">Next</a></p>
<p>The value returned by the PyFerret getdata function, and used by the PyFerret putdata function, is a dictionary of metadata and data. A description of the keys and values of this dictionary can be obtained from the Python <i>help</i> messages for these functions, for example, <i>help(pyferret.putdata)</i>, but is also described here.</p>
<h3>The data key</h3>
<p>The actual data values are given in an array associated with the <i>"data"</i> key in these dictionaries.</p>
<dl><dt>"data"</dt>
<dd>a NumPy array or masked array. Currently, only numeric arrays are supported, and the data will be (or will be treated as) 64-bit floating-point values.</dd>
</dl><h3>The metadata keys</h3>
<p>The following keys and their associated values are used to describe the metadata in these dictionaries.</p>
<dl><dt>"name"</dt>
<dd>a string giving the (code) name for the variable in Ferret; for example, "SST"</dd>
<dt>"title"</dt>
<dd>a string giving the title name for the variable in Ferret; for example, "Sea Surface Temperature"</dd>
<dt>"dset"</dt>
<dd>the Ferret dataset name or number of this data variable.</dd>
<dt>"missing_value"</dt>
<dd>the value used as a flag for missing-data. This will be (or will be treated as) a value consistent with the type (including bit size) of the data given by the <i>"data"</i> key.</dd>
<dt>"data_unit"</dt>
<dd>a string describing the unit of the data</dd>
<dt>"axis_types"</dt>
<dd>a list of integer values describing the type of each axis. Possible values are the following constants defined by the pyferret module:
<dl><dt>AXISTYPE_LONGITUDE</dt>
<dd>a longitude axis, typically in units of degrees east with a modulo of 360</dd>
<dt>AXISTYPE_LATITUDE</dt>
<dd>a latitude axis, typically in units of degrees north</dd>
<dt>AXISTYPE_LEVEL</dt>
<dd>a depth or altitude axis, where a depth axes becomes more positive at greater depths</dd>
<dt>AXISTYPE_TIME</dt>
<dd>a time axis. Each coordinates associated with this axis is an array of six values giving the year, month, day, hour, minute, and second.</dd>
<dt>AXISTYPE_CUSTOM</dt>
<dd>a custom axis. The axis has floating-point values in some unit of measure; however, Ferret does not try to interpret the units.</dd>
<dt>AXISTYPE_ABSTRACT</dt>
<dd>an abstract axis. The axis has unit-less integer values.</dd>
<dt>AXISTYPE_NORMAL</dt>
<dd>the axis is normal to the data (the axis does not "exist" for the data)</dd>
</dl></dd>
<dt>"axis_names"</dt>
<dd>a list of strings naming each the axes</dd>
<dt>"axis_units"</dt>
<dd>a list of strings naming the units of each axis, such as <i>"degrees_east"</i>, <i>"degrees_north"</i>, or <i>"meters"</i>.<br />
	For a time axis, thus has the type <i>AXISTYPE_TIME</i>, this names the calendar used for the time steps, as one of the following constants defined in the pyferret module:
<dl><dt>CALTYPE_GREGORIAN</dt>
<dd>the proleptic gregorian calendar is used, with a leap year occurring every four years except for century years that are not a multiple of 400; thus, on average, the length of a year is 365.2425 days.</dd>
<dt>CALTYPE_JULIAN</dt>
<dd>the julian calendar is used, with a leap year occurring every four years; thus, on average, the length of a year is 365.25 days.</dd>
<dt>CALTYPE_360DAY</dt>
<dd>every year consists of 12 months of 30 days</dd>
<dt>CALTYPE_NOLEAP</dt>
<dd>every year consists of 365 days, with months the length of non-leap-year months</dd>
<dt>CALTYPE_ALLLEAP</dt>
<dd>every year consits of 366 days, with months the length of leap-year months</dd>
<dt>CALTYPE_NONE</dt>
<dd>an unspecified calendar</dd>
</dl><p>	(These calendar-type constants are equal to strings of the constant's name.)</p></dd>
<dt>"axis_coords"</dt>
<dd>a list of arrays of coordinates for each axis. For most axes, the array of coordinates is a one-dimensional array of (64-bit) floating-point values. If the axis is normal to the data, thus has the type <i>AXISTYPE_NORMAL</i>, the coordinates "array" will be <i>None</i>. For an axis that is a time axis, thus has the type <i>AXISTYPE_TIME</i>, the array of coordinatesis a two-dimensional array of integers with the shape (N, 6), where N is the number of time points.The six integer values per time point are                                                                                                                                                                                         
<dl><dt>TIMEARRAY_YEARINDEX</dt>
<dd>index value in a time step array for the year</dd>
<dt>TIMEARRAY_MONTHINDEX</dt>
<dd>index value in a time step array for the month</dd>
<dt>TIMEARRAY_DAYINDEX</dt>
<dd>index value in a time step array for the day</dd>
<dt>TIMEARRAY_HOURINDEX</dt>
<dd>index value in a time step array for the hour</dd>
<dt>TIMEARRAY_MINUTEINDEX</dt>
<dd>index value in a time step array for the minute</dd>
<dt>TIMEARRAY_SECONDINDEX</dt>
<dd>index value in a time step array for the second</dd>
</dl><p>	Thus, if <i>time_coords</i> is the array of coordinates for a time axis, then <i>time_coords[t, pyferret.TIMEARRAY_YEARINDEX]</i>gives the year at time step t.</p></dd>
</dl><p> </p>
<h3>An example session using getdata and putdata</h3>
<p>The following example session starts as a Ferret session then returns to the Python prompt to work with the Ferret data. Later, the transformed data is then put back into Ferret so that it can then be used as a Ferret variable.</p>
<pre>
 
SST SEA SURFACE TEMPERATURE 1:180 1:90 ... 1:12 ... ...
Deg C on grid GSQ1 with -1.E+34 for missing data
X=20E:20E(380) Y=90S:90N 
...(output snipped)...yes? exit /topy&gt;&gt;&gt; sstdict=pyferret.getdata("SST[X=125E:95W,Y=45S:65N]", False)&gt;&gt;&gt; print pyferret.metastr(sstdict)title: SST[X=125E:95W,Y=45S:65N]
data_unit: Deg C
missing_value: -9.99999979021e+33
axis_names: ('COADSX', 'COADSY', '', 'TIME', '', '')
axis_types: (1=longitude, 2=latitude, 7=unused, 4=time, 7=unused, 7=unused)
axis_units: ('degrees_east', 'degrees_north', '', 'CALTYPE_GREGORIAN', '', '')
axis_coords: 'COADSX': [ 125. 127. 129. 131. 133. 135. 137. 139. 141. 143. 145. 147. ...(output snipped)...</pre><p>Since the second argument to the <i>getdata</i> function was set to <i>False</i>, the data array in this dictionary is an ordinary NumPy array (not a masked array). This was done so that we could manipulate the undefined values directly. The <i>metastr</i> function produces a nicely-formatted string describing the metadata in the dictionary, which when printed to the console provides an easy w                                                                                       
<p>Continuing the above session, we examine some of the contents of the dictionary, then manipulate some of the data it contains:</p>
<pre>
&gt;&gt;&gt; sstaxistypes = sstdict["axis_types"]&gt;&gt;&gt; print sstaxistypes(1, 2, 7, 4, 7, 7)&gt;&gt;&gt; sstaxistypes[pyferret.X_AXIS] == pyferret.AXISTYPE_LONGITUDETrue&gt;&gt;&gt; sstdata = sstdict["data"]&gt;&gt;&gt; sstdata.shape(71, 56, 1, 12, 1, 1)&gt;&gt;&gt; sstbadflag = sstdict["missing_value"]&gt;&gt;&gt; print sstbadflag[ -9.99999979e+33]&gt;&gt;&gt; badmask = ( sstdata == sstbadflag )&gt;&gt;&gt; sstbadflag[0] = 1.0E20
&gt;&gt;&gt; sstdata[badmask] = sstbadflag&gt;&gt;&gt; sstlons = sstdict["axis_coords"][pyferret.X_AXIS]&gt;&gt;&gt; m10r7lons = ( sstlons % 10.0 == 7.0 )&gt;&gt;&gt; sstlats = sstdict["axis_coords"][pyferret.Y_AXIS]&gt;&gt;&gt; import numpy&gt;&gt;&gt; midlats = numpy.logical_and(-3.0 &lt;= sstlats, sstlats &lt;= 3.0)&gt;&gt;&gt; tweakit = numpy.outer(m10r7lons, midlats)&gt;&gt;&gt; sstdata[tweakit,:,:,:,:] = 5&gt;&gt;&gt; sstdict["name"] = "TweakedSST"&gt;&gt;&gt; sstdict["title"] = "Tweaked subset of SST"&gt;&gt;&gt; print sstdict["data"][0:3,0:14:5,0,0,0,0][[ 1.18630772e+01 1.84438629e+01 1.00000002e+20] [ 1.18327265e+01 1.82615910e+01 1.00000002e+20] [ 1.14976921e+01 1.81365108e+01 1.00000002e+20]]&gt;&gt;&gt; print pyferret.metastr(sstdict)name: TweakedSSTtitle: Tweaked subset of SSTdata_unit: Deg Cmissing_value: 1e+20 ...(output snipped)...</pre><p>Notice that due to floating-point precision, the missing value of -1.0E+34 is actually slightly larger. However, since the missing value and the data array are the same data type, it is still safe use <i>==</i> when generating <i>badmask</i>. In the above we replace the missing value, both in the data array as well as the flag value, with 1.0E+20. Then some of the data values near the equator and at intervals of 10 degrees longitude, are changed to 5.0¬∞C. These changes are reflected in the arrays in the dictionary, as demonstrated by the last two print statements showing the missing data values of 1.0E+20. (This is because only the contents to the NumPy array references were modified, as in <i>sstbadflag[0] = 1.0E20</i>, and not the references themselves, as would be the case with <i>sstbadflag = 1.0E20</i>.) Also shown is the addition of the <i>"name"</i> key, which will be the name of the data variable when put into Ferret, and the changed title for the variable given by the <i>"title"</i> key. The <i>"name"</i> key is not defined by the <i>getdata</i> function.</p>
<p>Continuing the above session, we now use this data and metadata library to create a new variable in Ferret, and enter back into Ferret command-line mode:</p>
<pre>
&gt;&gt;&gt; pyferret.putdata(sstdict)&gt;&gt;&gt; pyferret.run()yes? show data /full ...(output snipped)... ------ Python Variables ------
 TWEAKEDSST
 Tweaked subset of SST 53:123 23:78 ... 1:12 ... ...
 Deg C on grid (G002) with 1.E+20 for missing data
 X=124E:94W Y=46S:66N 
yes? stats /brief tweakedsst Total # of data points: 194400 (180*90*1*12*1*1)
 # flagged as bad data: 154140
 Minimum value: -1.9043
 Maximum value: 32
 Mean value: 20.644 (unweighted average)
yes? set text /font=arialyes? shade tweakedsst[T=16-OCT]yes? go land 1yes? frame /file=tweakedsst.png /xpix=600</pre><p>Since the names of the axes were not modified in the dictionary, and the values were recognized as part of the existing axes, the new data set uses these existing axes. This is why the <i>I</i> and <i>J</i> indices of <i>TWEAKEDSST</i> do not start with one. This is also why the <i>shade</i> command, without any region specified, shows the full world map even though <i>TWEAKEDSST</i> is only defined in primarily the Pacific Ocean. The Ferret <i>stats</i> command shows that new missing value has been fully recognized. The purple-blue bars in the plot below show the areas that were modified in the expected positions.<br /><img class="image-inline" src="../../sites/default/files/images/documentation/pyferret/pyferret-images/tweakedsst.png" /></p>
<p> </p>
<p><a href="fortranefs.html">Previous</a> <a href="requirements.html">Next</a></p>                                                                                                              
<p> </p>
</div>
</div>
</div>

</div>

<div class="clearfix">
<nav class="links node-links clearfix"></nav>

</div>
</article>
</div>
</div>
</div>      </div>
</div>  </div>
</div></section>    
 
<footer id="section-footer" class="section section-footer">

  <div id="zone-footer-wrapper" class="zone-wrapper zone-footer-wrapper clearfix">  
  <div id="zone-footer" class="zone zone-footer clearfix container-12">
    <div class="grid-8 region region-footer-first" id="region-footer-first">
  <div class="region-inner region-footer-first-inner">
    <div class="block block-block block-1 block-block-1 odd block-without-title" id="block-block-1">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-block block-2 block-block-2 even block-without-title" id="block-block-2">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-menu block-menu-footer-first-menu block-menu-menu-footer-first-menu odd block-without-title" id="block-menu-menu-footer-first-menu">

  </div>
</div>  </div>
</div><div class="grid-4 region region-footer-second" id="region-footer-second">
  <div class="region-inner region-footer-second-inner">
    <div class="block block-menu block-menu-footer-second-menu block-menu-menu-footer-second-menu odd block-without-title" id="block-menu-menu-footer-second-menu">
  <div class="block-inner clearfix">
                
  </div>
</div>  </div>
</div>  </div>
</div></footer>  </div>  <div class="region region-page-bottom" id="region-page-bottom">
  <div class="region-inner region-page-bottom-inner">
      </div>
</div>  <div id="body-bg-bottom"></div>
</body>
</html>
